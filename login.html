<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Xjtm Crasher - Login System</title>
    <link href="https://fonts.googleapis.com/css2?family=Press+Start+2P&family=Poppins:wght@400;600&display=swap" rel="stylesheet"> 
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <style>
        :root {
            --neon-blue: #2563eb; 
            --neon-glow: rgba(37, 99, 235, 0.8);
            --input-bg: #1b222c; 
            --success-green: #00ff88;
        }
        body { background-color: #000; font-family: 'Poppins', sans-serif; display: flex; align-items: center; justify-content: center; min-height: 100vh; margin: 0; overflow: hidden; color: white; }
        #successNotif { display: none; position: fixed; top: 20px; background: var(--success-green); color: #000; padding: 10px 25px; border-radius: 50px; font-family: 'Press Start 2P', cursive; font-size: 10px; box-shadow: 0 0 20px var(--success-green); z-index: 10000; }
        #loadingScreen { display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: #000; z-index: 9999; flex-direction: column; justify-content: center; align-items: center; }
        .loading-gif { width: 85%; max-width: 400px; border-radius: 30px; border: 2px solid #582b9a; box-shadow: 0 0 40px rgba(111, 66, 193, 0.9); margin-bottom: 25px; }
        .loading-credits { font-family: 'Press Start 2P', cursive; font-size: 12px; color: white; }
        .login-container { position: relative; background: rgba(13, 17, 23, 0.95); padding: 70px 40px 40px; border-radius: 20px; width: 350px; text-align: center; border: 1px solid var(--neon-blue); box-shadow: 0 0 25px var(--neon-glow); }
        .profile-pic-container { position: absolute; top: -55px; left: 50%; transform: translateX(-50%); width: 110px; height: 110px; border-radius: 50%; border: 3px solid var(--neon-blue); background: #111; overflow: hidden; box-shadow: 0 0 15px var(--neon-glow); }
        .profile-pic-container img { width: 100%; height: 100%; object-fit: cover; }
        input { width: 100%; padding: 15px; margin: 10px 0; background: var(--input-bg); border: 2px solid #2563eb; color: white; border-radius: 12px; outline: none; box-sizing: border-box; }
        .login-btn { width: 100%; padding: 20px; background: linear-gradient(90deg, #2563eb, #7c3aed); border: none; color: white; border-radius: 12px; font-family: 'Press Start 2P', cursive; font-size: 10px; cursor: pointer; margin-top: 15px; }
    </style>
</head>
<body>

    <div id="successNotif">LOGIN SUKSES ✅</div>

    <div id="loadingScreen">
        <img src="https://files.catbox.moe/9p6mxc.jpg" class="loading-gif" alt="Loading">
        <p class="loading-credits">Xjtm by dhanz</p>
    </div>

    <div class="login-container">
        <div class="profile-pic-container">
            <img src="https://files.catbox.moe/9p6mxc.jpg" alt="Profile">
        </div>
        <h3 style="font-family: 'Press Start 2P'; font-size: 20px; color: var(--neon-blue); margin-bottom: 25px;">Welcome Back</h3>
        <form id="loginForm">
            <input type="text" id="username" placeholder="Username" required>
            <input type="password" id="password" placeholder="Password" required>
            <button type="submit" class="login-btn">LOGIN</button>
        </form>
        <a href="buy_account.html" style="display:block; margin-top:20px; color:#94a3b8; text-decoration:none; font-family:'Press Start 2P'; font-size:8px;">BUY ACCOUNT</a>
    </div>

    <script>
        // --- FITUR AUTO LOGIN ---
        document.addEventListener('DOMContentLoaded', () => {
            if (localStorage.getItem('userRole')) {
                window.location.href = "dashboard.html";
            }
        });

        const loginForm = document.getElementById('loginForm');
        const loadingScreen = document.getElementById('loadingScreen');
        const successNotif = document.getElementById('successNotif');

        const MASTER_USER = "dhanz";
        const MASTER_PASS = "dev";

        loginForm.addEventListener('submit', function(e) {
            e.preventDefault();
            const u = document.getElementById('username').value.trim();
            const p = document.getElementById('password').value.trim();

            const accounts = JSON.parse(localStorage.getItem('memberAccounts')) || [];
            const userMatch = accounts.find(a => a.username === u && a.password === p);

            if ((u === MASTER_USER && p === MASTER_PASS) || userMatch) {
                if (userMatch && new Date() > new Date(userMatch.expiry)) {
                    alert("❌ AKUN SUDAH EXPIRED!");
                    return;
                }

                loadingScreen.style.display = 'flex';
                setTimeout(() => {
                    loadingScreen.style.display = 'none';
                    successNotif.style.display = 'block';

                    // SIMPAN STATUS LOGIN
                    localStorage.setItem('userRole', userMatch ? userMatch.role : 'developer');
                    localStorage.setItem('currentUser', u);
                    
                    setTimeout(() => {
                        window.location.href = "dashboard.html";
                    }, 1500);
                }, 3000);
            } else {
                alert("❌ USERNAME/PASSWORD SALAH!");
            }
        });
    </script>
</body>
</html>